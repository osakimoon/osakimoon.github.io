<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>SG - LIST</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
      color: #f5f5f5;
      background: radial-gradient(circle at top, #18261c 0%, #0b1410 45%, #040807 100%);
    }

    /* ========= 竹林背景（sngy 风格） ========= */
    .bamboo-bg {
      position: fixed;
      inset: 0;
      overflow: hidden;
      z-index: 0;
      pointer-events: none;
    }
    .bamboo-stalk {
      position: absolute;
      bottom: 0;
      width: 10px;
      height: 130%;
      background: linear-gradient(to bottom, rgba(120, 160, 110, 0.9), rgba(70, 100, 65, 0.9));
      border-radius: 999px;
      box-shadow: 0 0 12px rgba(50, 90, 60, 0.6), 0 0 30px rgba(10, 30, 15, 0.9);
      transform-origin: bottom center;
      animation: sway 10s ease-in-out infinite alternate;
      opacity: 0.9;
    }
    .bamboo-stalk:nth-child(1) { left: 8%;  animation-duration: 12s; animation-delay: -3s; }
    .bamboo-stalk:nth-child(2) { left: 22%; animation-duration: 9s;  animation-delay: -1s; }
    .bamboo-stalk:nth-child(3) { left: 38%; animation-duration: 11s; animation-delay: -5s; }
    .bamboo-stalk:nth-child(4) { left: 56%; animation-duration: 8s;  animation-delay: -2s; }
    .bamboo-stalk:nth-child(5) { left: 72%; animation-duration: 13s; animation-delay: -4s; }
    .bamboo-stalk:nth-child(6) { left: 88%; animation-duration: 10s; animation-delay: -6s; }
    @keyframes sway { 0%{transform:rotate(-1.5deg)} 50%{transform:rotate(1.2deg)} 100%{transform:rotate(-1deg)} }

    .bamboo-leaf {
      position: absolute;
      width: 80px;
      height: 18px;
      background: linear-gradient(to right, #9acb78, #5f8e4d);
      border-radius: 999px;
      filter: blur(0.2px);
      opacity: 0.8;
      transform-origin: left center;
      animation: leaf-sway 7s ease-in-out infinite alternate;
    }
    .bamboo-leaf.l1 { top: 18%; left: 16%; transform: rotate(-18deg); animation-duration: 8s; }
    .bamboo-leaf.l2 { top: 30%; left: 30%; transform: rotate(-8deg);  animation-duration: 7s; }
    .bamboo-leaf.l3 { top: 24%; left: 48%; transform: rotate(-22deg); animation-duration: 9s; }
    .bamboo-leaf.l4 { top: 40%; left: 62%; transform: rotate(-12deg); animation-duration: 6.5s; }
    .bamboo-leaf.l5 { top: 35%; left: 78%; transform: rotate(-25deg); animation-duration: 9.5s; }
    .bamboo-leaf.l6 { top: 52%; left: 20%; transform: rotate(-18deg); animation-duration: 8.5s; }
    @keyframes leaf-sway { 0%{transform:rotate(-16deg) translateX(0)} 50%{transform:rotate(-24deg) translateX(6px)} 100%{transform:rotate(-18deg) translateX(3px)} }

    .bamboo-haze {
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at bottom, rgba(5, 15, 8, 0.9), transparent 60%),
        radial-gradient(circle at top, rgba(20, 40, 25, 0.7), transparent 70%);
      z-index: 1;
    }

    /* ========= 中央内容（tg 结构） ========= */
    .wrap {
      width: 100%;
      max-width: 960px;
      padding: 32px 20px;
      position: relative;
      z-index: 5;
    }

    .panel {
      border-radius: 16px;
      border: 1px solid rgba(180, 220, 180, 0.2);
      background: rgba(8, 14, 10, 0.78);
      backdrop-filter: blur(10px);
      padding: 24px 28px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.8), 0 0 40px rgba(40,80,50,0.35);
    }

    h1 {
      margin: 0 0 4px;
      font-size: 20px;
      font-weight: 500;
      text-align: center;
      letter-spacing: 0.12em;
    }

    .sub {
      text-align: center;
      font-size: 12px;
      color: #c3d7c3;
      margin-bottom: 16px;
    }

    .login, .albums, .gallery { display: none; }
    .login.active, .albums.active, .gallery.active { display: block; }

    .field { margin: 16px 0 8px; }
    label { font-size: 13px; display: block; margin-bottom: 6px; }

    input[type="password"] {
      width: 100%;
      padding: 9px 10px;
      border-radius: 10px;
      border: 1px solid #4e7253;
      background: rgba(9, 18, 11, 0.9);
      color: #f5fff0;
      font-size: 14px;
      outline: none;
    }

    input[type="password"]:focus {
      border-color: #cfe8c8;
      box-shadow: 0 0 0 1px rgba(191, 221, 183, 0.35);
    }

    button {
      margin-top: 10px;
      padding: 9px 14px;
      border-radius: 999px;
      border: 1px solid #cfe8c8;
      background: #cfe8c8;
      color: #122016;
      font-size: 14px;
      cursor: pointer;
    }

    button:hover { background: transparent; color: #eaf8e5; }
    .btn-block { width: 100%; }

    .hint {
      margin-top: 8px;
      font-size: 11px;
      color: #a9c0a5;
      text-align: center;
      line-height: 1.7;
    }

    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      color: #d5e6d0;
      margin-bottom: 10px;
      gap: 8px;
      flex-wrap: wrap;
    }
    .link-like { cursor: pointer; text-decoration: underline; white-space: nowrap; }

    /* LIST 卡片 */
    .album-list { display: flex; flex-direction: column; gap: 14px; margin-top: 8px; }
    .album-card {
      border-radius: 12px;
      border: 1px solid rgba(180, 220, 180, 0.18);
      padding: 14px 16px;
      background: rgba(6, 10, 7, 0.65);
    }
    .album-title { font-size: 15px; margin-bottom: 4px; letter-spacing: 0.04em; }
    .album-meta { font-size: 12px; color: #b9d0b5; margin-bottom: 4px; }
    .album-desc { font-size: 12px; color: #d7e7d3; opacity: 0.9; margin-bottom: 8px; }
    .album-actions { display: flex; justify-content: flex-end; }
    .album-btn { padding-inline: 18px; }

    /* 图片网格 */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px;
      margin-top: 10px;
    }
    .img-box {
      position: relative;
      padding-top: 150%;
      background-size: cover;
      background-position: center;
      background-color: #101712;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 6px 16px rgba(0,0,0,0.75);
    }

    /* 单页下滑模式：一列大图，不裁切整张图 */
    .scroll-mode .grid { grid-template-columns: 1fr; gap: 16px; justify-items: center; }
    .scroll-mode .img-box {
      width: min(92vw, 860px);
      padding-top: 150%;
      background-size: contain;
      background-position: top center;
      background-repeat: no-repeat;
      background-color: #060b07;
    }

    /* 单页模式：最后一页框加高（至上の人生最后一页） */
    .scroll-mode .img-box.last-page { padding-top: 190%; } /* 不够就调大：210% / 230% */

    @media (max-width: 640px) {
      .panel { padding: 18px 16px; }
    }
  
    /* ====== 文字弹窗（Modal）====== */
    .modal-mask{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.55);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    .modal-mask.show{ display:flex; }

    .modal{
      width: min(92vw, 520px);
      border-radius: 16px;
      border: 1px solid rgba(180,220,180,0.25);
      background: rgba(8,14,10,0.92);
      backdrop-filter: blur(10px);
      padding: 18px 18px 14px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.8), 0 0 40px rgba(40,80,50,0.35);
    }
    .modal-title{
      font-size: 14px;
      letter-spacing: 0.08em;
      margin: 0 0 8px;
      color: #eaf8e5;
      text-align: left;
    }
    .modal-text{
      font-size: 12px;
      line-height: 1.8;
      color: #cfe8c8;
      white-space: pre-line;
    }
    .modal-actions{
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 12px;
    }
    .modal .btn-ghost{
      border: 1px solid rgba(207,232,200,0.75);
      background: transparent;
      color: #eaf8e5;
      margin-top: 0;
      padding: 9px 16px;
    }
    .modal .btn-ghost:hover{
      background: rgba(207,232,200,0.15);
    }

  </style>
</head>

<body oncontextmenu="return false;">
  <!-- 竹林背景 -->
  <div class="bamboo-bg">
    <div class="bamboo-stalk"></div><div class="bamboo-stalk"></div><div class="bamboo-stalk"></div>
    <div class="bamboo-stalk"></div><div class="bamboo-stalk"></div><div class="bamboo-stalk"></div>
    <div class="bamboo-leaf l1"></div><div class="bamboo-leaf l2"></div><div class="bamboo-leaf l3"></div>
    <div class="bamboo-leaf l4"></div><div class="bamboo-leaf l5"></div><div class="bamboo-leaf l6"></div>
    <div class="bamboo-haze"></div>
  </div>

  <div class="wrap">
    <div class="panel">

      <!-- 登录 -->
      <div class="login active" id="login">
        <h1> </h1>
        <div class="sub">Password required</div>

        <div class="field">
          <label for="pw">PASSWORD</label>
          <input type="password" id="pw" autocomplete="off" />
        </div>

        <button id="loginBtn" class="btn-block">ENTER</button>
        <p class="hint">仅供同好阅读，请勿外传、勿二改。</p>
      </div>

      <!-- LIST -->
      <div class="albums" id="albums">
        <div class="topbar">
          <span>LIST</span>
          <span class="link-like" id="logoutTop">Log out</span>
        </div>

        <p class="hint">之后的本子存档我也会放在这。</p>

        <div class="album-list">
          <!-- 本一：夢の後 -->
          <div class="album-card">
            <div class="album-title">夢の後</div>
            <div class="album-meta">16p · 不死川实弥×富冈义勇</div>
            <div class="album-desc">整本浏览模式。Switch mode 可切换阅读模式。</div>
            <div class="album-actions">
              <button class="album-btn" onclick="openYumenoato()">OPEN</button>
            </div>
          </div>

          <!-- 本二：至上の人生 -->
          <div class="album-card">
            <div class="album-title">至上の人生</div>
            <div class="album-meta">19p · 不死川实弥×富冈义勇</div>
            <div class="album-desc">整本浏览模式。Switch mode 可切换阅读模式。</div>
            <div class="album-actions">
              <button class="album-btn" onclick="openShijou()">OPEN</button>
            </div>
          </div>
          <!-- 本三：いわずもがな -->
          <div class="album-card">
            <div class="album-title">いわずもがな</div>
            <div class="album-meta">43p · 不死川实弥×富冈义勇</div>
            <div class="album-desc">整本浏览模式。Switch mode 可切换阅读模式。</div>
            <div class="album-actions">
              <button class="album-btn" onclick="openIwa()">OPEN</button>
            </div>
          </div>


          <!-- 本四：祝 -->
          <div class="album-card">
            <div class="album-title">祝</div>
            <div class="album-meta">84p · 不死川实弥×富冈义勇</div>
            <div class="album-desc">整本浏览模式。Switch mode 可切换阅读模式。</div>
            <div class="album-actions">
              <button class="album-btn" onclick="openZhu()">OPEN</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Gallery 1 -->
      <div class="gallery" id="gallery1">
        <div class="topbar">
          <span>夢の後 · 16 pages</span>
          <span>
            <span class="link-like" id="switch1">Switch mode</span>&nbsp;&nbsp;
            <span class="link-like" id="back1">← Back</span>&nbsp;&nbsp;
            <span class="link-like" id="logout1">Log out</span>
          </span>
        </div>
        <p class="hint">翻译仅作交流用，请支持原作与作者。</p>

        <div class="grid" id="grid1">
          <!-- images3/0.jpg ~ 15.jpg -->
          <div class="img-box" style="background-image:url('images3/0.jpg');"></div>
          <div class="img-box" style="background-image:url('images3/1.jpg');"></div>
          <div class="img-box" style="background-image:url('images3/2.jpg');"></div>
          <div class="img-box" style="background-image:url('images3/3.jpg');"></div>
          <div class="img-box" style="background-image:url('images3/4.jpg');"></div>
          <div class="img-box" style="background-image:url('images3/5.jpg');"></div>
          <div class="img-box" style="background-image:url('images3/6.jpg');"></div>
          <div class="img-box" style="background-image:url('images3/7.jpg');"></div>
          <div class="img-box" style="background-image:url('images3/8.jpg');"></div>
          <div class="img-box" style="background-image:url('images3/9.jpg');"></div>
          <div class="img-box" style="background-image:url('images3/10.jpg');"></div>
          <div class="img-box" style="background-image:url('images3/11.jpg');"></div>
          <div class="img-box" style="background-image:url('images3/12.jpg');"></div>
          <div class="img-box" style="background-image:url('images3/13.jpg');"></div>
          <div class="img-box" style="background-image:url('images3/14.jpg');"></div>
          <div class="img-box" style="background-image:url('images3/15.jpg');"></div>
        </div>
      </div>

      <!-- Gallery 2 -->
      <div class="gallery" id="gallery2">
        <div class="topbar">
          <span>至上の人生 · 19 pages</span>
          <span>
            <span class="link-like" id="switch2">Switch mode</span>&nbsp;&nbsp;
            <span class="link-like" id="back2">← Back</span>&nbsp;&nbsp;
            <span class="link-like" id="logout2">Log out</span>
          </span>
        </div>
        <p class="hint">翻译仅作交流用，请支持原作与作者。</p>

        <div class="grid" id="grid2">
          <!-- images5/1.jpg ~ 19.jpg -->
          <div class="img-box" style="background-image:url('images5/1.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/2.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/3.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/4.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/5.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/6.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/7.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/8.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/9.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/10.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/11.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/12.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/13.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/14.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/15.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/16.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/17.jpg');"></div>
          <div class="img-box" style="background-image:url('images5/18.jpg');"></div>
          <div class="img-box last-page" style="background-image:url('images5/19.jpg');"></div>
        </div>
      </div>

      <!-- Gallery 3 -->
      <div class="gallery" id="gallery3">
        <div class="topbar">
          <span>いわずもがな · 43 pages</span>
          <span>
            <span class="link-like" id="switch3">Switch mode</span>&nbsp;&nbsp;
            <span class="link-like" id="back3">← Back</span>&nbsp;&nbsp;
            <span class="link-like" id="logout3">Log out</span>
          </span>
        </div>
        <p class="hint">翻译仅作交流用，请支持原作与作者。</p>

        <div class="grid" id="grid3">
          <!-- images6 将由脚本自动生成：兼容 images6/0.jpg~42.jpg 或 images6/1.jpg~43.jpg -->
        </div>
      </div>


      <!-- Gallery 4 -->
      <div class="gallery" id="gallery4">
        <div class="topbar">
          <span>祝 · 84 pages</span>
          <span>
            <span class="link-like" id="switch4">Switch mode</span>&nbsp;&nbsp;
            <span class="link-like" id="back4">← Back</span>&nbsp;&nbsp;
            <span class="link-like" id="logout4">Log out</span>
          </span>
        </div>
        <p class="hint">翻译仅作交流用，请支持原作与作者。</p>

        <div class="grid" id="grid4">
          <!-- images7 将由脚本自动生成：兼容 images7/0.jpg~83.jpg 或 images7/1.jpg~84.jpg -->
        </div>
      </div>




    </div>
  </div>

  <script>
    // ====== 入口密码：游客 & 本人（tg 写法）======
    const VISITOR_PASSWORD = "112902081791761560925039";
    const OWNER_PASSWORD   = "osakimoon";   // 你自己的简短密码（主人免二次单本密码）

    // ====== 各本单独密码（游客需要）======
    const YUMENOATO_PASSWORD = "yumenoato"; // 夢の後
    const SHIJOU_PASSWORD    = "domiko";    // 至上の人生
    const IWA_PASSWORD      = "motimoti_baby"; // いわずもがな
    const ZHU_PASSWORD      = "koto_hachi"; // 祝

    const login    = document.getElementById("login");
    const albums   = document.getElementById("albums");
    const gallery1 = document.getElementById("gallery1");
    const gallery2 = document.getElementById("gallery2");
    const gallery3 = document.getElementById("gallery3");
    const gallery4 = document.getElementById("gallery4");

    const pwInput  = document.getElementById("pw");
    const loginBtn = document.getElementById("loginBtn");
    const logoutTop= document.getElementById("logoutTop");

    const switch1  = document.getElementById("switch1");
    const back1    = document.getElementById("back1");
    const logout1  = document.getElementById("logout1");

    const switch2  = document.getElementById("switch2");
    const back2    = document.getElementById("back2");
    const logout2  = document.getElementById("logout2");

    const switch3  = document.getElementById("switch3");
    const back3    = document.getElementById("back3");
    const logout3  = document.getElementById("logout3");

    const switch4  = document.getElementById("switch4");
    const back4    = document.getElementById("back4");
    const logout4  = document.getElementById("logout4");

    const grid3    = document.getElementById("grid3");
    const grid4    = document.getElementById("grid4");

    let isOwner = false; // 主人=免二次单本密码

    function doLogin() {
      const v = pwInput.value.trim();
      if (v === VISITOR_PASSWORD || v === OWNER_PASSWORD) {
        isOwner = (v === OWNER_PASSWORD);
        login.classList.remove("active");
        albums.classList.add("active");
        showNotice();
        pwInput.value = "";
      } else {
        alert("密码不正确");
      }
    }

    function openYumenoato() {
      if (isOwner) {
        albums.classList.remove("active");
        gallery1.classList.add("active");
        return;
      }
      const second = prompt("请输入该本密码：");
      if (second === YUMENOATO_PASSWORD) {
        albums.classList.remove("active");
        gallery1.classList.add("active");
      } else if (second !== null) {
        alert("密码不正确");
      }
    }

    function openShijou() {
      if (isOwner) {
        albums.classList.remove("active");
        gallery2.classList.add("active");
        return;
      }
      const second = prompt("请输入该本密码：");
      if (second === SHIJOU_PASSWORD) {
        albums.classList.remove("active");
        gallery2.classList.add("active");
      } else if (second !== null) {
        alert("密码不正确");
      }
    }

    function buildIwaGrid(startIndex){
      grid3.innerHTML = "";
      for (let i = 0; i < 43; i++){
        const n = startIndex + i;
        const div = document.createElement("div");
        div.className = "img-box";
        div.style.backgroundImage = `url('images6/${n}.jpg')`;
        grid3.appendChild(div);
      }
    }

    function detectIwaStartIndex(){
      // 兼容：images6/0.jpg~42.jpg 或 images6/1.jpg~43.jpg
      return new Promise((resolve) => {
        const t = setTimeout(() => resolve(1), 800); // 超时默认从 1 开始
        const img = new Image();
        img.onload = () => { clearTimeout(t); resolve(0); };
        img.onerror = () => { clearTimeout(t); resolve(1); };
        img.src = "images6/0.jpg";
      });
    }

    function openIwa() {
      if (isOwner) {
        albums.classList.remove("active");
        gallery3.classList.add("active");
        detectIwaStartIndex().then(buildIwaGrid);
        return;
      }
      const second = prompt("请输入该本密码：");
      if (second === IWA_PASSWORD) {
        albums.classList.remove("active");
        gallery3.classList.add("active");
        detectIwaStartIndex().then(buildIwaGrid);
      } else if (second !== null) {
        alert("密码不正确");
      }
    }



    function buildZhuGrid(startIndex){
      grid4.innerHTML = "";
      for (let i = 0; i < 84; i++){
        const n = startIndex + i;
        const div = document.createElement("div");
        div.className = "img-box";
        div.style.backgroundImage = `url('images7/${n}.jpg')`;
        grid4.appendChild(div);
      }
    }

    function detectZhuStartIndex(){
      // 兼容：images7/0.jpg~83.jpg 或 images7/1.jpg~84.jpg
      return new Promise((resolve) => {
        const t = setTimeout(() => resolve(1), 800); // 超时默认从 1 开始
        const img = new Image();
        img.onload = () => { clearTimeout(t); resolve(0); };
        img.onerror = () => { clearTimeout(t); resolve(1); };
        img.src = "images7/0.jpg";
      });
    }

    function openZhu() {
      if (isOwner) {
        albums.classList.remove("active");
        gallery4.classList.add("active");
        detectZhuStartIndex().then(buildZhuGrid);
        return;
      }
      const second = prompt("请输入该本密码：");
      if (second === ZHU_PASSWORD) {
        albums.classList.remove("active");
        gallery4.classList.add("active");
        detectZhuStartIndex().then(buildZhuGrid);
      } else if (second !== null) {
        alert("密码不正确");
      }
    }

    function backToAlbums(fromGallery) {
      fromGallery.classList.remove("active");
      albums.classList.add("active");
      // 返回时把 scroll-mode 关掉，避免下次进去还是单页
      fromGallery.classList.remove("scroll-mode");
    }

    function doLogout() {
      gallery1.classList.remove("active");
      gallery2.classList.remove("active");
      gallery3.classList.remove("active");
      gallery4.classList.remove("active");
      albums.classList.remove("active");
      login.classList.add("active");
      isOwner = false;
      gallery1.classList.remove("scroll-mode");
      gallery2.classList.remove("scroll-mode");
      gallery3.classList.remove("scroll-mode");
      gallery4.classList.remove("scroll-mode");
    }

    // Switch mode：给 gallery 本身加/去 scroll-mode（tg 写法）
    switch1.addEventListener("click", () => gallery1.classList.toggle("scroll-mode"));
    switch2.addEventListener("click", () => gallery2.classList.toggle("scroll-mode"));
    switch3.addEventListener("click", () => gallery3.classList.toggle("scroll-mode"));
    switch4.addEventListener("click", () => gallery4.classList.toggle("scroll-mode"));

    back1.addEventListener("click", () => backToAlbums(gallery1));
    back2.addEventListener("click", () => backToAlbums(gallery2));
    back3.addEventListener("click", () => backToAlbums(gallery3));
    back4.addEventListener("click", () => backToAlbums(gallery4));

    logout1.addEventListener("click", doLogout);
    logout2.addEventListener("click", doLogout);
    logout3.addEventListener("click", doLogout);
    logout4.addEventListener("click", doLogout);
    logoutTop.addEventListener("click", doLogout);

    loginBtn.addEventListener("click", doLogin);
    pwInput.addEventListener("keydown", e => { if (e.key === "Enter") doLogin(); });

    // 简单防护：禁用常见保存/查看源码键
    document.addEventListener("keydown", e => {
      if ((e.ctrlKey && ["s","S","u","U"].includes(e.key)) || e.key === "F12") e.preventDefault();
    });
  
    // ====== 文字弹窗：登录成功后弹出 ======
    const noticeMask  = document.getElementById("noticeMask");
    const noticeClose = document.getElementById("noticeClose");

    // 默认：同一个浏览器只弹一次（想每次都弹，把下面 if 这行删掉即可）
    function showNotice(){
      if (localStorage.getItem("sg_notice_shown") === "1") return;
      noticeMask.classList.add("show");
      noticeMask.setAttribute("aria-hidden", "false");
    }
    function hideNotice(){
      noticeMask.classList.remove("show");
      noticeMask.setAttribute("aria-hidden", "true");
      localStorage.setItem("sg_notice_shown", "1");
    }

    noticeClose.addEventListener("click", hideNotice);
    noticeMask.addEventListener("click", (e) => { if (e.target === noticeMask) hideNotice(); });
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && noticeMask.classList.contains("show")) hideNotice();
    });

  </script>

  <!-- ====== 文字弹窗（Modal）====== -->
  <div class="modal-mask" id="noticeMask" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="noticeTitle">
      <h3 class="modal-title" id="noticeTitle">NOTICE</h3>
      <div class="modal-text" id="noticeText">
仅供同好交流阅读。
请勿外传、勿二改、勿商用。
支持原作与作者。
      </div>
      <div class="modal-actions">
        <button class="btn-ghost" id="noticeClose">OK</button>
      </div>
    </div>
  </div>

</body>
</html>

