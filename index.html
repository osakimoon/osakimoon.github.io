<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>TG</title>
  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f5;
      color: #111;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .wrap {
      width: 100%;
      max-width: 980px;
      padding: 32px 20px;
    }

    .panel {
      border: 1px solid #ddd;
      border-radius: 16px;
      background: #fff;
      padding: 24px 28px;
      position: relative;
      z-index: 10; /* 保证主面板在弹窗之上 */
    }

    h1 {
      margin: 0 0 4px;
      font-size: 20px;
      font-weight: 500;
      text-align: center;
      letter-spacing: 0.08em;
    }

    .sub {
      text-align: center;
      font-size: 12px;
      color: #777;
      margin-bottom: 16px;
    }

    .login,
    .albums,
    .gallery { display: none; }

    .login.active,
    .albums.active,
    .gallery.active { display: block; }

    .field {
      margin: 16px 0 8px;
    }

    label {
      font-size: 13px;
      display: block;
      margin-bottom: 6px;
    }

    input[type="password"] {
      width: 100%;
      padding: 9px 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      background: #fafafa;
      font-size: 14px;
      outline: none;
    }

    input[type="password"]:focus {
      border-color: #111;
    }

    button {
      margin-top: 10px;
      padding: 9px 14px;
      border-radius: 999px;
      border: 1px solid #111;
      background: #111;
      color: #fff;
      font-size: 14px;
      cursor: pointer;
    }

    button:hover {
      background: #fff;
      color: #111;
    }

    .btn-block {
      width: 100%;
    }

    .hint {
      margin-top: 8px;
      font-size: 11px;
      color: #9a9a9a;
      text-align: center;
    }

    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      color: #666;
      margin-bottom: 10px;
      gap: 8px;
    }

    .link-like {
      cursor: pointer;
      text-decoration: underline;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px;
      margin-top: 10px;
    }

    /* 用背景图 + 透明遮罩，减少“另存为图片”的机会 */
    .img-box {
      position: relative;
      padding-top: 150%; /* 约 2:3 比例，可改 */
      background-size: cover;
      background-position: center;
      background-color: #eee;
      border-radius: 8px;
      overflow: hidden;
    }

    .img-box::after {
      content: "";
      position: absolute;
      inset: 0;
      background: transparent;
      pointer-events: auto;
    }

    /* === 档案（分类）样式 === */
    .album-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 12px;
      margin-top: 8px;
    }

    .album-card {
      border: 1px solid #e5e5e5;
      border-radius: 12px;
      padding: 14px 16px;
      background: #fafafa;
    }

    .album-title {
      font-size: 15px;
      font-weight: 500;
      margin-bottom: 4px;
    }

    .album-meta {
      font-size: 11px;
      color: #888;
      margin-bottom: 8px;
    }

    .album-desc {
      font-size: 12px;
      color: #555;
      margin-bottom: 10px;
    }

    .album-actions {
      display: flex;
      justify-content: flex-end;
    }

    .album-btn {
      margin-top: 0;
      font-size: 13px;
      padding-inline: 14px;
    }

    /* ========== 四周弹出的黑色小弹窗 ========== */
    .msg-layer {
      position: fixed;
      inset: 0;
      pointer-events: none;   /* 不挡操作 */
      z-index: 5;             /* 在页面上，但低于 panel（z=10） */
    }

    .msg-box-pop {
      position: absolute;
      min-width: 210px;
      max-width: 260px;
      background: rgba(15, 15, 15, 0.92);
      color: #f5f5f5;
      font-size: 12px;
      padding: 8px 10px;
      border-radius: 8px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.45);
      line-height: 1.4;
      opacity: 0;
      transform: scale(0.9) translateY(4px);
      animation: fadePop 2s ease-out forwards;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.12);
      backdrop-filter: blur(6px);
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    @keyframes fadePop {
      0%   { opacity: 0; transform: scale(0.9) translateY(4px); }
      10%  { opacity: 1; transform: scale(1) translateY(0); }
      80%  { opacity: 1; transform: scale(1) translateY(0); }
      100% { opacity: 0; transform: scale(0.95) translateY(-4px); }
    }
  </style>
</head>
<body oncontextmenu="return false;">
  <!-- 弹窗层（围绕四周漂浮的小框） -->
  <div class="msg-layer" id="msgLayer"></div>

  <div class="wrap">
    <div class="panel">
      <!-- 登录区域 -->
      <div class="login active" id="login">
        <h1>THK FOR WATCHING</h1>
        <div class="sub">Password required</div>

        <div class="field">
          <label for="pw">PASSWORD</label>
          <input type="password" id="pw" autocomplete="off" />
        </div>
        <button id="loginBtn" class="btn-block">ENTER</button>
        <p class="hint">仅供同好查看。</p>
      </div>

      <!-- 档案列表（分类页） -->
      <div class="albums" id="albums">
        <div class="topbar">
          <span>LIST</span>
          <span class="link-like" id="logoutTop">Log out</span>
        </div>
        <p class="hint">别的本子存档我也会放在这。</p>

        <div class="album-list">
          <!-- 目前只有一档：HIKARI -->
          <div class="album-card">
            <div class="album-title">HIKARI</div>
            <div class="album-meta">29p · 炭治郎 x 富冈</div>
            <div class="album-desc">
              当前唯一档案。点击进入后为整本 29 页浏览模式，请不要外传。
            </div>
            <div class="album-actions">
              <button class="album-btn" onclick="openHikari()">OPEN</button>
            </div>
          </div>
        </div>
      </div>

      <!-- 图片区域：HIKARI 这一档 -->
      <div class="gallery" id="gallery">
        <div class="topbar">
          <span>HIKARI · 29 pages</span>
          <span>
            <span class="link-like" onclick="backToAlbums()">← Back</span>
            &nbsp;&nbsp;
            <span class="link-like" id="logout">Log out</span>
          </span>
        </div>
        <p class="hint">
          请勿转载到其他平台，仅供阅读，能力范围内请支持原作者，购买实体~
        </p>

        <div class="grid">
          <div class="img-box" style="background-image:url('images/1.jpg');"></div>
          <div class="img-box" style="background-image:url('images/2.jpg');"></div>
          <div class="img-box" style="background-image:url('images/3.jpg');"></div>
          <div class="img-box" style="background-image:url('images/4.jpg');"></div>
          <div class="img-box" style="background-image:url('images/5.jpg');"></div>
          <div class="img-box" style="background-image:url('images/6.jpg');"></div>
          <div class="img-box" style="background-image:url('images/7.jpg');"></div>
          <div class="img-box" style="background-image:url('images/8.jpg');"></div>
          <div class="img-box" style="background-image:url('images/9.jpg');"></div>
          <div class="img-box" style="background-image:url('images/10.jpg');"></div>
          <div class="img-box" style="background-image:url('images/11.jpg');"></div>
          <div class="img-box" style="background-image:url('images/12.jpg');"></div>
          <div class="img-box" style="background-image:url('images/13.jpg');"></div>
          <div class="img-box" style="background-image:url('images/14.jpg');"></div>
          <div class="img-box" style="background-image:url('images/15.jpg');"></div>
          <div class="img-box" style="background-image:url('images/16.jpg');"></div>
          <div class="img-box" style="background-image:url('images/17.jpg');"></div>
          <div class="img-box" style="background-image:url('images/18.jpg');"></div>
          <div class="img-box" style="background-image:url('images/19.jpg');"></div>
          <div class="img-box" style="background-image:url('images/20.jpg');"></div>
          <div class="img-box" style="background-image:url('images/21.jpg');"></div>
          <div class="img-box" style="background-image:url('images/22.jpg');"></div>
          <div class="img-box" style="background-image:url('images/23.jpg');"></div>
          <div class="img-box" style="background-image:url('images/24.jpg');"></div>
          <div class="img-box" style="background-image:url('images/25.jpg');"></div>
          <div class="img-box" style="background-image:url('images/26.jpg');"></div>
          <div class="img-box" style="background-image:url('images/27.jpg');"></div>
          <div class="img-box" style="background-image:url('images/28.jpg');"></div>
          <div class="img-box" style="background-image:url('images/29.jpg');"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 访问密码
    const PASSWORD = "07140208176165merdeka772";

    const login     = document.getElementById("login");
    const albums    = document.getElementById("albums");
    const gallery   = document.getElementById("gallery");
    const pwInput   = document.getElementById("pw");
    const loginBtn  = document.getElementById("loginBtn");
    const logoutBtn = document.getElementById("logout");
    const logoutTop = document.getElementById("logoutTop");

    function doLogin() {
      if (pwInput.value === PASSWORD) {
        login.classList.remove("active");
        albums.classList.add("active");   // 先进入档案列表
        pwInput.value = "";
      } else {
        alert("密码不正确");
      }
    }

    function openHikari() {
      albums.classList.remove("active");
      gallery.classList.add("active");
    }

    function backToAlbums() {
      gallery.classList.remove("active");
      albums.classList.add("active");
    }

    function doLogout() {
      gallery.classList.remove("active");
      albums.classList.remove("active");
      login.classList.add("active");
    }

    loginBtn.addEventListener("click", doLogin);
    pwInput.addEventListener("keydown", e => {
      if (e.key === "Enter") doLogin();
    });

    if (logoutBtn)  logoutBtn.addEventListener("click", doLogout);
    if (logoutTop)  logoutTop.addEventListener("click", doLogout);

    // 禁止常见保存 / 查看源代码快捷键（只是增加一点点难度）
    document.addEventListener("keydown", e => {
      if (
        (e.ctrlKey && (e.key === "s" || e.key === "S" || e.key === "u" || e.key === "U")) ||
        e.key === "F12"
      ) {
        e.preventDefault();
      }
    });

    // ========= 四周弹出的小弹窗逻辑 =========
    const msgLayer = document.getElementById("msgLayer");

    // 这里写每个弹窗里的文字，你可以随便改：
    const messages = [
      "不要把生杀予夺的大权交给别人！",
      "别哭，不要绝望。",
      "义勇先生。",
      "要杀炭治郎，先从我的尸体上跨过去！",
      "义勇先生。",
      "义勇先生。",
      "炭治郎，你变得擅长战斗了。",
      "义勇先生不打算把锖兔托付给你的东西延续下去吗？"
    ];

    let panelRect = null;

    function updatePanelRect() {
      const panel = document.querySelector(".panel");
      if (panel) {
        panelRect = panel.getBoundingClientRect();
      }
    }

    function randomPositionAroundPanel() {
      const vw = window.innerWidth;
      const vh = window.innerHeight;
      const boxWidth  = 240;
      const boxHeight = 70;

      if (!panelRect) updatePanelRect();

      const safeMargin = 36; // 主面板四周再预留一点不放弹窗

      let x, y;
      let tries = 0;

      while (tries < 30) {
        // 尽量靠四周生成
        const edge = Math.floor(Math.random() * 4); // 0上 1下 2左 3右
        if (edge === 0) { // 上
          x = Math.random() * (vw - boxWidth);
          y = 10;
        } else if (edge === 1) { // 下
          x = Math.random() * (vw - boxWidth);
          y = vh - boxHeight - 10;
        } else if (edge === 2) { // 左
          x = 10;
          y = Math.random() * (vh - boxHeight);
        } else { // 右
          x = vw - boxWidth - 10;
          y = Math.random() * (vh - boxHeight);
        }

        const boxRect = {
          left: x,
          right: x + boxWidth,
          top: y,
          bottom: y + boxHeight
        };

        // 如果与 panel 有明显交叠，就重新选
        if (panelRect &&
            !(boxRect.right > panelRect.left - safeMargin &&
              boxRect.left < panelRect.right + safeMargin &&
              boxRect.bottom > panelRect.top - safeMargin &&
              boxRect.top < panelRect.bottom + safeMargin)
        ) {
          break;
        }
        tries++;
      }

      return { x, y };
    }

    function spawnMsgBox() {
      if (!msgLayer || messages.length === 0) return;

      const msg = document.createElement("div");
      msg.className = "msg-box-pop";

      const content = messages[Math.floor(Math.random() * messages.length)];
      msg.textContent = content;

      const pos = randomPositionAroundPanel();
      msg.style.left = pos.x + "px";
      msg.style.top  = pos.y + "px";

      msgLayer.appendChild(msg);

      // 2 秒后自动移除
      setTimeout(() => {
        msg.remove();
      }, 2000);
    }

    // 初始计算 panel 位置
    updatePanelRect();
    window.addEventListener("resize", updatePanelRect);

    // 循环生成弹窗：越小的间隔 => 同时在屏幕上的弹窗越多
    setInterval(spawnMsgBox, 500);
  </script>
</body>
</html>
